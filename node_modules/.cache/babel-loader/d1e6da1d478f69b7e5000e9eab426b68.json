{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\GitHub\\\\Pre-registration\\\\src\\\\components\\\\UserCourses.component.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Form, InputGroup, Col, Button, Card, Table } from \"react-bootstrap\";\nimport Cookie from \"js-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nconst RemoveBtnStyle = {\n  textAlign: \"center\"\n};\nexport default class UserCourses extends Component {\n  constructor(props) {\n    super(props);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.removeCourse = this.removeCourse.bind(this);\n    this.state = {\n      UserCourses: [],\n      options: [],\n      selected: undefined,\n      type: \"Regular\",\n      order: \"Primary\",\n      ref: React.createRef()\n    };\n  } //Right before anything load the page this is called\n\n\n  componentDidMount() {\n    axios.get(\"http://localhost:5000/users?token=\" + Cookie.get(\"token\") + \"&userId=\" + Cookie.get(\"userId\")).then(res => {\n      this.setState({\n        UserCourses: res.data.courses\n      });\n    }).catch(err => {\n      alert(\"Error: \" + err);\n    });\n  } //InputChange for the course box\n\n\n  onInputChange(e) {\n    if (e.length < 3) return;\n    axios.get(\"http://localhost:5000/courses/search?value=\" + e + \"&token=\" + Cookie.get(\"token\") + \"&userId=\" + Cookie.get(\"userId\")).then(res => {\n      var options = [];\n      res.data.forEach((item, index) => {\n        options.push({\n          id: item._id,\n          label: item.course_id + \" \" + item.course_name\n        });\n      });\n      this.setState({\n        options: options\n      });\n    }).catch(err => {\n      alert(\"Error: \" + err);\n    });\n  }\n\n  removeCourse(index) {\n    console.log(index);\n    this.state.UserCourses.splice(index, 1);\n    this.setState({\n      UserCourses: this.state.UserCourses\n    });\n  }\n\n  addCourse() {\n    if (this.state.selected === undefined) return;\n    this.state.UserCourses.push({\n      order: this.state.order,\n      type: this.state.type,\n      course_id: this.state.selected[0].id,\n      code: this.state.selected[0].label.split(\" \")[0]\n    });\n    this.setState({\n      UserCourses: this.state.UserCourses,\n      selected: undefined,\n      options: []\n    });\n    this.state.ref.current.clear();\n    document.getElementById(\"coursesSelection\");\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    console.log(\"Submitting\");\n    console.log(this.state.UserCourses);\n    const userCourses = {\n      userId: Cookie.get(\"userId\"),\n      courses: this.state.UserCourses\n    };\n    console.log(userCourses);\n    axios.post(\"http://localhost:5000/users/setUserCourses?token=\" + Cookie.get(\"token\") + \"&userId=\" + Cookie.get(\"userId\"), userCourses).then(res => {\n      console.log(res);\n      window.location = \"/UserCourses\";\n    }).catch(err => {\n      alert(\"Error: \" + err);\n      window.location = \"/UserCourses\";\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Card, {\n      style: {\n        width: \"80%\"\n      },\n      className: \"mx-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, \"User courses\"), /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 19\n      }\n    }, \"User\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: Cookie.get(\"userId\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridCourse\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, \"Course\"), /*#__PURE__*/React.createElement(Typeahead, {\n      id: \"coursesSelection\",\n      onInputChange: this.onInputChange,\n      onChange: selected => {\n        this.setState({\n          selected\n        });\n      },\n      options: this.state.options,\n      ref: this.state.ref,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridType\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, \"Course type\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      value: this.state.type,\n      onChange: e => {\n        this.setState({\n          type: e.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, \"Regular\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }\n    }, \"Elective\"))), /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridOrder\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }\n    }, \"Order\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      value: this.state.order,\n      onChange: e => {\n        this.setState({\n          order: e.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }, \"Primary\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, \"Secondary\")), /*#__PURE__*/React.createElement(InputGroup.Append, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-secondary\",\n      onClick: this.addCourse,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(Table, {\n      responsive: true,\n      striped: true,\n      bordered: true,\n      hover: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 19\n      }\n    }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 19\n      }\n    }, \"Type\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 19\n      }\n    }, \"Order\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 19\n      }\n    }, \"Options\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 15\n      }\n    }, this.state.UserCourses.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 23\n        }\n      }, item.code), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 23\n        }\n      }, item.type), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 23\n        }\n      }, item.order), /*#__PURE__*/React.createElement(\"td\", {\n        key: i,\n        style: RemoveBtnStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"danger\",\n        onClick: () => this.removeCourse(i),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 25\n        }\n      }, \"Remove\")));\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Save\",\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/USER/Documents/GitHub/Pre-registration/src/components/UserCourses.component.js"],"names":["React","Component","axios","Form","InputGroup","Col","Button","Card","Table","Cookie","Typeahead","RemoveBtnStyle","textAlign","UserCourses","constructor","props","onInputChange","bind","addCourse","onSubmit","removeCourse","state","options","selected","undefined","type","order","ref","createRef","componentDidMount","get","then","res","setState","data","courses","catch","err","alert","e","length","forEach","item","index","push","id","_id","label","course_id","course_name","console","log","splice","code","split","current","clear","document","getElementById","preventDefault","userCourses","userId","post","window","location","render","width","target","value","map","i"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Form, InputGroup, Col, Button, Card, Table } from \"react-bootstrap\";\nimport Cookie from \"js-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\n\nconst RemoveBtnStyle = {\n  textAlign: \"center\",\n};\n\nexport default class UserCourses extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onInputChange = this.onInputChange.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.removeCourse = this.removeCourse.bind(this);\n\n    this.state = {\n      UserCourses: [],\n      options: [],\n      selected: undefined,\n      type: \"Regular\",\n      order: \"Primary\",\n      ref: React.createRef(),\n    };\n  }\n\n  //Right before anything load the page this is called\n  componentDidMount() {\n    axios\n      .get(\n        \"http://localhost:5000/users?token=\" +\n          Cookie.get(\"token\") +\n          \"&userId=\" +\n          Cookie.get(\"userId\")\n      )\n      .then((res) => {\n        this.setState({ UserCourses: res.data.courses });\n      })\n      .catch((err) => {\n        alert(\"Error: \" + err);\n      });\n  }\n\n  //InputChange for the course box\n  onInputChange(e) {\n    if (e.length < 3) return;\n\n    axios\n      .get(\n        \"http://localhost:5000/courses/search?value=\" +\n          e +\n          \"&token=\" +\n          Cookie.get(\"token\") +\n          \"&userId=\" +\n          Cookie.get(\"userId\")\n      )\n      .then((res) => {\n        var options = [];\n\n        res.data.forEach((item, index) => {\n          options.push({\n            id: item._id,\n            label: item.course_id + \" \" + item.course_name,\n          });\n        });\n        this.setState({ options: options });\n      })\n      .catch((err) => {\n        alert(\"Error: \" + err);\n      });\n  }\n\n  removeCourse(index) {\n    console.log(index);\n    this.state.UserCourses.splice(index, 1);\n    this.setState({ UserCourses: this.state.UserCourses });\n  }\n\n  addCourse() {\n    if (this.state.selected === undefined) return;\n\n    this.state.UserCourses.push({\n      order: this.state.order,\n      type: this.state.type,\n      course_id: this.state.selected[0].id,\n      code: this.state.selected[0].label.split(\" \")[0],\n    });\n    this.setState({\n      UserCourses: this.state.UserCourses,\n      selected: undefined,\n      options: [],\n    });\n\n    this.state.ref.current.clear();\n    document.getElementById(\"coursesSelection\");\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    console.log(\"Submitting\");\n    console.log(this.state.UserCourses);\n\n    const userCourses = {\n      userId: Cookie.get(\"userId\"),\n      courses: this.state.UserCourses,\n    };\n\n    console.log(userCourses);\n\n    axios\n      .post(\n        \"http://localhost:5000/users/setUserCourses?token=\" +\n          Cookie.get(\"token\") +\n          \"&userId=\" +\n          Cookie.get(\"userId\"),\n        userCourses\n      )\n      .then((res) => {\n        console.log(res);\n        window.location = \"/UserCourses\";\n      })\n      .catch((err) => {\n        alert(\"Error: \" + err);\n        window.location = \"/UserCourses\";\n      });\n  }\n\n  render() {\n    return (\n      <Card style={{ width: \"80%\" }} className=\"mx-auto\">\n        <Card.Body>\n          <Card.Title>User courses</Card.Title>\n          <Form onSubmit={this.onSubmit}>\n            <Form.Row>\n              <Form.Group as={Col} controlId=\"formGridEmail\">\n                <fieldset disabled>\n                  <Form.Label>User</Form.Label>\n                  <Form.Control placeholder={Cookie.get(\"userId\")} />\n                </fieldset>\n              </Form.Group>\n            </Form.Row>\n\n            <Form.Row>\n              <Form.Group as={Col} controlId=\"formGridCourse\">\n                <Form.Label>Course</Form.Label>\n                <Typeahead\n                  id=\"coursesSelection\"\n                  onInputChange={this.onInputChange}\n                  onChange={(selected) => {\n                    this.setState({ selected });\n                  }}\n                  options={this.state.options}\n                  ref={this.state.ref}\n                />\n              </Form.Group>\n\n              <Form.Group as={Col} controlId=\"formGridType\">\n                <Form.Label>Course type</Form.Label>\n                <Form.Control\n                  as=\"select\"\n                  value={this.state.type}\n                  onChange={(e) => {\n                    this.setState({\n                      type: e.target.value,\n                    });\n                  }}\n                >\n                  <option>Regular</option>\n                  <option>Elective</option>\n                </Form.Control>\n              </Form.Group>\n\n              <Form.Group as={Col} controlId=\"formGridOrder\">\n                <Form.Label>Order</Form.Label>\n                <br />\n                <InputGroup className=\"mb-3\">\n                  <Form.Control\n                    as=\"select\"\n                    value={this.state.order}\n                    onChange={(e) => {\n                      this.setState({\n                        order: e.target.value,\n                      });\n                    }}\n                  >\n                    <option>Primary</option>\n                    <option>Secondary</option>\n                  </Form.Control>\n                  <InputGroup.Append>\n                    <Button\n                      variant=\"outline-secondary\"\n                      onClick={this.addCourse}\n                    >\n                      Add\n                    </Button>\n                  </InputGroup.Append>\n                </InputGroup>\n              </Form.Group>\n            </Form.Row>\n\n            <Table responsive striped bordered hover>\n              <thead>\n                <tr>\n                  <th>Code</th>\n                  <th>Type</th>\n                  <th>Order</th>\n                  <th>Options</th>\n                </tr>\n              </thead>\n              <tbody>\n                {this.state.UserCourses.map((item, i) => {\n                  return (\n                    <tr key={i}>\n                      <td>{item.code}</td>\n                      <td>{item.type}</td>\n                      <td>{item.order}</td>\n                      <td key={i} style={RemoveBtnStyle}>\n                        <Button\n                          variant=\"danger\"\n                          onClick={() => this.removeCourse(i)}\n                        >\n                          Remove\n                        </Button>\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </Table>\n\n            <input type=\"submit\" value=\"Save\" className=\"btn btn-primary\" />\n          </Form>\n        </Card.Body>\n      </Card>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}