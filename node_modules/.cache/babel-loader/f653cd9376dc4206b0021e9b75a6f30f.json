{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\USER\\\\Desktop\\\\online_enrollment-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\USER\\\\Desktop\\\\online_enrollment-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\USER\\\\Desktop\\\\online_enrollment-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\USER\\\\Desktop\\\\online_enrollment-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\USER\\\\Desktop\\\\online_enrollment-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from'axios';import{Card}from'react-bootstrap';import Cookie from\"js-cookie\";var CreateUser=/*#__PURE__*/function(_Component){_inherits(CreateUser,_Component);var _super=_createSuper(CreateUser);function CreateUser(props){var _this;_classCallCheck(this,CreateUser);_this=_super.call(this,props);_this.onChangePassword=_this.onChangePassword.bind(_assertThisInitialized(_this));_this.onChangeEmail=_this.onChangeEmail.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.isLogin=_this.isLogin.bind(_assertThisInitialized(_this));_this.state={email:'',password:''};return _this;}//Right before anything load the page this is called\n_createClass(CreateUser,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.isLogin()){//window.location = '/';\nreturn;}this.setState({email:\"\"});}},{key:\"onChangeEmail\",value:function onChangeEmail(e){this.setState({email:e.target.value});}},{key:\"onChangePassword\",value:function onChangePassword(e){this.setState({password:e.target.value});}},{key:\"onSubmit\",value:function onSubmit(e){e.preventDefault();var user={email:this.state.email,password:this.state.password};console.log(user);axios.post('http://localhost:5000/users/login',user).then(function(res){console.log(res.data);Cookie.set(\"token\",res.data.token);Cookie.set(\"userId\",res.data.userId);//Return to the user list\nwindow.location='/';}).catch(function(err){Cookie.remove(\"token\");Cookie.remove(\"userId\");alert('Error: '+err);//Return to the user list\nwindow.location='/';});}},{key:\"isLogin\",value:function isLogin(){if(!Cookie.get('token'))return false;else return Cookie.get('token')!==''&&Cookie.get('userId')!=='';}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Card,{style:{width:'18rem'},className:\"mx-auto\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,null,\"Login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Email: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",required:true,className:\"form-control\",value:this.state.email,onChange:this.onChangeEmail})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",required:true,className:\"form-control\",value:this.state.password,onChange:this.onChangePassword})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Login\",className:\"btn btn-primary\"})))));}}]);return CreateUser;}(Component);export{CreateUser as default};","map":{"version":3,"sources":["C:/Users/USER/Desktop/online_enrollment-master/src/components/Login.component.js"],"names":["React","Component","axios","Card","Cookie","CreateUser","props","onChangePassword","bind","onChangeEmail","onSubmit","isLogin","state","email","password","setState","e","target","value","preventDefault","user","console","log","post","then","res","data","set","token","userId","window","location","catch","err","remove","alert","get","width"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport axios from 'axios';\nimport { Card } from 'react-bootstrap';\nimport Cookie from \"js-cookie\"\n\nexport default class CreateUser extends Component {\n    constructor(props) {\n        super(props);\n\n        this.onChangePassword = this.onChangePassword.bind(this);\n        this.onChangeEmail = this.onChangeEmail.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.isLogin = this.isLogin.bind(this);\n\n        this.state = {\n            email: '',\n            password: '',\n        };\n\n    }\n\n    //Right before anything load the page this is called\n    componentDidMount() {\n\n        if(this.isLogin())\n        {\n            //window.location = '/';\n            return;\n        }\n\n        this.setState({\n            email: \"\"\n        })\n    }\n\n    onChangeEmail(e) {\n        this.setState({\n            email: e.target.value\n        });\n    }\n\n    onChangePassword(e) {\n        this.setState({\n            password: e.target.value\n        });\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n\n        const user = {\n            email: this.state.email,\n            password: this.state.password\n        };\n\n        console.log(user);\n\n        axios.post('http://localhost:5000/users/login',user)\n            .then(res => {\n                console.log(res.data);\n                Cookie.set(\"token\", res.data.token);\n                Cookie.set(\"userId\", res.data.userId);\n                //Return to the user list\n                window.location = '/';\n            })\n            .catch((err) => {\n                Cookie.remove(\"token\");\n                Cookie.remove(\"userId\");\n\n                alert('Error: ' + err);\n                //Return to the user list\n                window.location = '/';\n            });\n\n\n    }\n\n    isLogin()\n    {\n        if(!Cookie.get('token'))\n            return false;\n        else\n            return (Cookie.get('token') !== '' && Cookie.get('userId') !== '')\n    }\n\n\n\n    render() {\n        return (\n            <Card style={{ width: '18rem' }} className=\"mx-auto\">\n                <Card.Body>\n                    <Card.Title>Login</Card.Title>\n                        <form onSubmit={this.onSubmit}>\n                            <div className=\"form-group\">\n                                <label>Email: </label>\n                                <input type=\"text\"\n                                       required\n                                       className=\"form-control\"\n                                       value={this.state.email}\n                                       onChange={this.onChangeEmail}\n                                />\n                            </div>\n                            <div className=\"form-group\">\n                                <label>Password: </label>\n                                <input type=\"password\"\n                                       required\n                                       className=\"form-control\"\n                                       value={this.state.password}\n                                       onChange={this.onChangePassword}\n                                />\n                            </div>\n                            <div className=\"form-group\">\n                                <input type=\"submit\" value=\"Login\" className=\"btn btn-primary\"/>\n                            </div>\n                        </form>\n                </Card.Body>\n            </Card>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}