{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tare9\\\\Desktop\\\\Pre-registration-MERN\\\\src\\\\components\\\\UserCourses.component.js\";\nimport React, { Component } from \"react\";\nimport axios from 'axios';\nimport { Form, InputGroup, Col, Button, Card, Table } from \"react-bootstrap\";\nimport Cookie from \"js-cookie\";\nimport { Typeahead } from 'react-bootstrap-typeahead';\nconst RemoveBtnStyle = {\n  'textAlign': 'center'\n};\nexport default class UserCourses extends Component {\n  constructor(props) {\n    super(props);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.removeCourse = this.removeCourse.bind(this);\n    this.state = {\n      UserCourses: [],\n      options: [],\n      selected: undefined,\n      type: \"Regular\",\n      order: \"Primary\",\n      ref: React.createRef()\n    };\n  } //Right before anything load the page this is called\n\n\n  componentDidMount() {\n    axios.get('http://localhost:3000/users?token=' + Cookie.get('token') + \"&userId=\" + Cookie.get('userId')).then(res => {\n      this.setState({\n        UserCourses: res.data.courses\n      });\n    }).catch(err => {\n      alert('Error: ' + err);\n    });\n  } //InputChange for the course box\n\n\n  onInputChange(e) {\n    if (e.length < 3) return;\n    axios.get('http://localhost:3000/courses/search?value=' + e + '&token=' + Cookie.get('token') + \"&userId=\" + Cookie.get('userId')).then(res => {\n      var options = [];\n      res.data.forEach((item, index) => {\n        options.push({\n          id: item._id,\n          label: item.course_id + ' ' + item.course_name\n        });\n      });\n      this.setState({\n        options: options\n      });\n    }).catch(err => {\n      alert('Error: ' + err);\n    });\n  }\n\n  removeCourse(index) {\n    console.log(index);\n    this.state.UserCourses.splice(index, 1);\n    this.setState({\n      UserCourses: this.state.UserCourses\n    });\n  }\n\n  addCourse() {\n    if (this.state.selected === undefined) return;\n    this.state.UserCourses.push({\n      order: this.state.order,\n      type: this.state.type,\n      course_id: this.state.selected[0].id,\n      code: this.state.selected[0].label.split(' ')[0]\n    });\n    this.setState({\n      UserCourses: this.state.UserCourses,\n      selected: undefined,\n      options: []\n    });\n    this.state.ref.current.clear();\n    document.getElementById('coursesSelection');\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    console.log(\"Submitting\");\n    console.log(this.state.UserCourses);\n    const userCourses = {\n      userId: Cookie.get('userId'),\n      courses: this.state.UserCourses\n    };\n    console.log(userCourses);\n    axios.post('http://localhost:3000/users/setUserCourses?token=' + Cookie.get('token') + \"&userId=\" + Cookie.get('userId'), userCourses).then(res => {\n      console.log(res);\n      window.location = '/UserCourses';\n    }).catch(err => {\n      alert('Error: ' + err);\n      window.location = '/UserCourses';\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Card, {\n      style: {\n        width: '80%'\n      },\n      className: \"mx-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, \"User courses\"), /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 37\n      }\n    }, \"User\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: Cookie.get('userId'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 37\n      }\n    })))), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridCourse\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 37\n      }\n    }, \"Course\"), /*#__PURE__*/React.createElement(Typeahead, {\n      id: \"coursesSelection\",\n      onInputChange: this.onInputChange,\n      onChange: selected => {\n        this.setState({\n          selected\n        });\n      },\n      options: this.state.options,\n      ref: this.state.ref,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridType\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 37\n      }\n    }, \"Course type\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      value: this.state.type,\n      onChange: e => {\n        this.setState({\n          type: e.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 41\n      }\n    }, \"Regular\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 41\n      }\n    }, \"Elective\"))), /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridOrder\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 37\n      }\n    }, \"Order\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 67\n      }\n    }), /*#__PURE__*/React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      value: this.state.order,\n      onChange: e => {\n        this.setState({\n          order: e.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 45\n      }\n    }, \"Primary\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 45\n      }\n    }, \"Secondary\")), /*#__PURE__*/React.createElement(InputGroup.Append, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-secondary\",\n      onClick: this.addCourse,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 45\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(Table, {\n      responsive: true,\n      striped: true,\n      bordered: true,\n      hover: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 37\n      }\n    }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 37\n      }\n    }, \"Type\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 37\n      }\n    }, \"Order\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 37\n      }\n    }, \"Options\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 33\n      }\n    }, this.state.UserCourses.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 44\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 41\n        }\n      }, item.code), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 41\n        }\n      }, item.type), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 41\n        }\n      }, item.order), /*#__PURE__*/React.createElement(\"td\", {\n        key: i,\n        style: RemoveBtnStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"danger\",\n        onClick: () => this.removeCourse(i),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 41\n        }\n      }, \"Remove\")));\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Save\",\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 29\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/tare9/Desktop/Pre-registration-MERN/src/components/UserCourses.component.js"],"names":["React","Component","axios","Form","InputGroup","Col","Button","Card","Table","Cookie","Typeahead","RemoveBtnStyle","UserCourses","constructor","props","onInputChange","bind","addCourse","onSubmit","removeCourse","state","options","selected","undefined","type","order","ref","createRef","componentDidMount","get","then","res","setState","data","courses","catch","err","alert","e","length","forEach","item","index","push","id","_id","label","course_id","course_name","console","log","splice","code","split","current","clear","document","getElementById","preventDefault","userCourses","userId","post","window","location","render","width","target","value","map","i"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport axios from 'axios';\r\nimport {Form, InputGroup, Col, Button, Card, Table} from \"react-bootstrap\";\r\nimport Cookie from \"js-cookie\";\r\nimport {Typeahead} from 'react-bootstrap-typeahead';\r\n\r\nconst RemoveBtnStyle = {\r\n    'textAlign': 'center'\r\n};\r\n\r\nexport default class UserCourses extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onInputChange = this.onInputChange.bind(this);\r\n        this.addCourse = this.addCourse.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n        this.removeCourse = this.removeCourse.bind(this);\r\n\r\n\r\n        this.state = {\r\n            UserCourses: [],\r\n            options: [],\r\n            selected: undefined,\r\n            type: \"Regular\",\r\n            order: \"Primary\",\r\n            ref: React.createRef()\r\n        };\r\n\r\n    }\r\n\r\n    //Right before anything load the page this is called\r\n    componentDidMount() {\r\n        axios.get('http://localhost:3000/users?token=' + Cookie.get('token') + \"&userId=\"+Cookie.get('userId'))\r\n            .then(res => {\r\n                this.setState({UserCourses:res.data.courses});\r\n            })\r\n            .catch((err) => {\r\n                alert('Error: ' + err);\r\n            });\r\n    }\r\n\r\n    //InputChange for the course box\r\n    onInputChange(e) {\r\n\r\n        if(e.length<3)\r\n            return;\r\n\r\n        axios.get('http://localhost:3000/courses/search?value=' + e + '&token=' + Cookie.get('token') + \"&userId=\"+Cookie.get('userId'))\r\n            .then(res => {\r\n\r\n                var options = [];\r\n\r\n                res.data.forEach((item,index) => {\r\n                    options.push({id:item._id,label:item.course_id+' ' + item.course_name});\r\n                });\r\n                this.setState({options:options});\r\n\r\n            })\r\n            .catch((err) => {\r\n                alert('Error: ' + err);\r\n            });\r\n    }\r\n\r\n    removeCourse(index)\r\n    {\r\n        console.log(index);\r\n        this.state.UserCourses.splice(index, 1);\r\n        this.setState({UserCourses:this.state.UserCourses});\r\n    }\r\n\r\n    addCourse()\r\n    {\r\n        if(this.state.selected === undefined)\r\n            return;\r\n\r\n        this.state.UserCourses.push({order:this.state.order,type:this.state.type,course_id:this.state.selected[0].id,code:this.state.selected[0].label.split(' ')[0]});\r\n        this.setState({\r\n            UserCourses:this.state.UserCourses,\r\n            selected: undefined,\r\n            options: []\r\n        });\r\n\r\n        this.state.ref.current.clear()\r\n        document.getElementById('coursesSelection')\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault();\r\n        console.log(\"Submitting\");\r\n        console.log(this.state.UserCourses);\r\n\r\n        const userCourses = {\r\n            userId:Cookie.get('userId'),\r\n            courses: this.state.UserCourses\r\n        };\r\n\r\n        console.log(userCourses);\r\n\r\n        axios.post('http://localhost:3000/users/setUserCourses?token=' + Cookie.get('token') + \"&userId=\"+Cookie.get('userId'),userCourses)\r\n            .then(res => {\r\n                console.log(res);\r\n                window.location = '/UserCourses';\r\n            })\r\n            .catch((err) => {\r\n                alert('Error: ' + err);\r\n                window.location = '/UserCourses';\r\n            });\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Card style={{ width: '80%' }} className=\"mx-auto\">\r\n                <Card.Body>\r\n                    <Card.Title>User courses</Card.Title>\r\n                        <Form onSubmit={this.onSubmit}>\r\n                            <Form.Row>\r\n                                <Form.Group as={Col} controlId=\"formGridEmail\">\r\n                                    <fieldset disabled>\r\n                                    <Form.Label>User</Form.Label>\r\n                                    <Form.Control placeholder={Cookie.get('userId')} />\r\n                                    </fieldset>\r\n                                </Form.Group>\r\n                            </Form.Row>\r\n\r\n                            <Form.Row>\r\n                                <Form.Group as={Col} controlId=\"formGridCourse\">\r\n                                    <Form.Label>Course</Form.Label>\r\n                                    <Typeahead\r\n                                        id=\"coursesSelection\"\r\n                                        onInputChange={this.onInputChange}\r\n                                        onChange={(selected) => {\r\n                                            this.setState({selected});\r\n                                        }}\r\n                                        options={this.state.options}\r\n                                        ref={this.state.ref}\r\n                                    />\r\n                                </Form.Group>\r\n\r\n                                <Form.Group as={Col} controlId=\"formGridType\">\r\n                                    <Form.Label>Course type</Form.Label>\r\n                                    <Form.Control as=\"select\" value={this.state.type} onChange={(e) => {\r\n                                        this.setState({\r\n                                            type: e.target.value\r\n                                        });\r\n                                    }}>\r\n                                        <option>Regular</option>\r\n                                        <option>Elective</option>\r\n                                    </Form.Control>\r\n                                </Form.Group>\r\n\r\n                                <Form.Group as={Col} controlId=\"formGridOrder\">\r\n                                    <Form.Label>Order</Form.Label><br/>\r\n                                    <InputGroup className=\"mb-3\">\r\n                                        <Form.Control as=\"select\" value={this.state.order} onChange={(e) => {\r\n                                            this.setState({\r\n                                                order: e.target.value\r\n                                            });\r\n                                        }}>\r\n                                            <option>Primary</option>\r\n                                            <option>Secondary</option>\r\n                                        </Form.Control>\r\n                                        <InputGroup.Append>\r\n                                            <Button variant=\"outline-secondary\" onClick={this.addCourse}>Add</Button>\r\n                                        </InputGroup.Append>\r\n                                    </InputGroup>\r\n                                </Form.Group>\r\n                            </Form.Row>\r\n\r\n                            <Table responsive striped bordered hover>\r\n                                <thead>\r\n                                <tr>\r\n                                    <th>Code</th>\r\n                                    <th>Type</th>\r\n                                    <th>Order</th>\r\n                                    <th>Options</th>\r\n                                </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                {this.state.UserCourses.map((item, i) => {\r\n                                    return <tr key={i}>\r\n                                        <td>{item.code}</td>\r\n                                        <td>{item.type}</td>\r\n                                        <td>{item.order}</td>\r\n                                        <td key={i} style={RemoveBtnStyle} >\r\n                                        <Button variant=\"danger\" onClick={() => this.removeCourse(i)}>Remove</Button></td>\r\n                                    </tr>})}\r\n                                </tbody>\r\n                            </Table>\r\n\r\n                            <input type=\"submit\" value=\"Save\" className=\"btn btn-primary\"/>\r\n                        </Form>\r\n                </Card.Body>\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}